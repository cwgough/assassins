{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/cwill/Documents/Assassins/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/cwill/Documents/Assassins/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/cwill/Documents/Assassins/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useRef,useState,useEffect}from'react';//import axios from '../api/axios'\nimport{Link,useNavigate,useLocation}from'react-router-dom';import'../App.css';import axios from'../api/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var LOGIN_URL='/login';var Login=function Login(){var navigate=useNavigate();var userRef=useRef();var errRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPwd=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),errMsg=_useState6[0],setErrMsg=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),success=_useState8[0],setSuccess=_useState8[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var response,_err$response,_err$response2;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(JSON.stringify({name:name,password:password}));_context.prev=2;_context.next=5;return axios.post(LOGIN_URL,JSON.stringify({name:name,password:password}),{headers:{'Content-Type':'application/json'},withCredentials:true});case 5:response=_context.sent;console.log(\"we done\");setUser('');setPwd('');setSuccess(true);navigate(\"/\".concat(name),{replace:true});//replaces success page \n_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](2);if(!(_context.t0!==null&&_context.t0!==void 0&&_context.t0.response)){setErrMsg('No Server Response');}else if(((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===400){setErrMsg('Missing Username or Password');}else if(((_err$response2=_context.t0.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){setErrMsg('Unauthorized');}else{setErrMsg('Login Failed');}errRef.current.focus();case 17:case\"end\":return _context.stop();}},_callee,null,[[2,13]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"PCT Assassins\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",ref:userRef,autoComplete:\"off\",onChange:function onChange(e){return setUser(e.target.value);},value:name,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",onChange:function onChange(e){return setPwd(e.target.value);},value:password,required:true}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign In\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Need an Account?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"line\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/register\",children:\"Register\"})})]}),/*#__PURE__*/_jsx(\"p\",{ref:errRef,className:errMsg?\"errmsg\":\"offscreen\",\"aria-live\":\"assertive\",children:errMsg})]})});};export default Login;","map":{"version":3,"names":["React","useRef","useState","useEffect","Link","useNavigate","useLocation","axios","LOGIN_URL","Login","navigate","userRef","errRef","name","setUser","password","setPwd","errMsg","setErrMsg","success","setSuccess","handleSubmit","e","preventDefault","console","log","JSON","stringify","post","headers","withCredentials","response","replace","status","current","focus","target","value"],"sources":["C:/Users/cwill/Documents/Assassins/client/src/components/loginPage.js"],"sourcesContent":["import React from 'react'\r\nimport {useRef, useState, useEffect} from 'react'\r\n//import axios from '../api/axios'\r\nimport { Link, useNavigate, useLocation} from 'react-router-dom'\r\nimport '../App.css'\r\nimport axios from '../api/axios'\r\nconst LOGIN_URL = '/login'\r\n\r\nconst Login = () => {\r\n  const navigate = useNavigate()\r\n  const userRef = useRef();\r\n  const errRef = useRef();\r\n\r\n  const [name, setUser] = useState('');\r\n  const [password, setPwd] = useState('');\r\n  const [errMsg, setErrMsg] = useState('');\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    \r\n    e.preventDefault();\r\n    console.log(JSON.stringify({name,password}))\r\n    try {\r\n        const response = await axios.post(LOGIN_URL,\r\n            JSON.stringify({ name, password }),\r\n            {\r\n                headers: { 'Content-Type': 'application/json' },\r\n                withCredentials: true\r\n            }\r\n        );\r\n        console.log(\"we done\");\r\n        setUser('');\r\n        setPwd('');\r\n        setSuccess(true);\r\n        navigate(`/${name}`, { replace: true}) //replaces success page \r\n    } catch (err) {\r\n        if (!err?.response) {\r\n            setErrMsg('No Server Response');\r\n        } else if (err.response?.status === 400) {\r\n            setErrMsg('Missing Username or Password');\r\n        } else if (err.response?.status === 401) {\r\n            setErrMsg('Unauthorized');\r\n        } else {\r\n            setErrMsg('Login Failed');\r\n        }\r\n        errRef.current.focus();\r\n    }\r\n    \r\n}\r\n  \r\n  return (\r\n  <>\r\n   <section>\r\n      <h1>PCT Assassins</h1>\r\n      <form onSubmit={handleSubmit}>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              ref={userRef}\r\n              autoComplete=\"off\"\r\n              onChange={(e) => setUser(e.target.value)}\r\n              value={name}\r\n              required\r\n            />\r\n\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              onChange={(e) => setPwd(e.target.value)}\r\n              value={password}\r\n              required\r\n            />\r\n        <button>Sign In</button>\r\n      </form>\r\n      <p>\r\n        Need an Account?<br />\r\n        <span className=\"line\">\r\n        {/*put router link here*/}\r\n        <a href=\"/register\">Register</a>\r\n        </span>\r\n      </p>\r\n      <p ref={errRef} className={errMsg ? \"errmsg\" : \"offscreen\"} aria-live=\"assertive\">{errMsg}</p>\r\n    </section>\r\n  </>\r\n  )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}